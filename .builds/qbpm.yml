image: nixos/unstable
sources:
  - https://git.sr.ht/~pvsr/qbpm
environment:
  NIX: "nix --extra-experimental-features nix-command --extra-experimental-features flakes"
tasks:
  - deps: |
      cd qbpm
      $NIX build .#devShells.x86_64-linux.default .#checks.x86_64-linux.formatting
  - check: |
      cd qbpm
      $NIX flake check
  - pytest: |
      cd qbpm
      $NIX develop -c pytest
